#N canvas 129 153 678 512 10;
#X obj 184 35 loadbang;
#N canvas 785 60 503 576 calculateGraph 0;
#X obj 95 376 -;
#X obj 95 406 *;
#X obj 95 437 +;
#X obj 95 466 /;
#X obj 75 517 *;
#X obj 75 546 tabwrite \$0-curve;
#X obj 76 333 t f f f;
#X obj 76 241 f;
#X obj 110 241 + 1;
#X obj 76 209 until;
#X msg 76 186 100;
#X msg 121 210 0;
#X obj 76 295 / 100;
#X obj 76 263 t f f;
#X obj 174 441 t f;
#X obj 161 303 dbtorms;
#X obj 161 281 + 100;
#X obj 268 316 /;
#X obj 268 285 swap 1;
#X obj 76 156 t b b;
#X obj 76 125 del 50;
#X obj 390 56 route set;
#X obj 282 55 route set;
#X obj 95 489 clip 0 1;
#X obj 76 33 r \$0-thresh;
#X obj 184 33 r \$0-ratio;
#X obj 282 33 r \$0-thresh;
#X obj 390 32 r \$0-ratio;
#X obj 267 260 r \$0-ratio;
#X obj 161 260 r \$0-thresh;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 23 0;
#X connect 4 0 5 0;
#X connect 6 0 4 0;
#X connect 6 1 0 0;
#X connect 6 2 3 1;
#X connect 7 0 8 0;
#X connect 7 0 13 0;
#X connect 8 0 7 1;
#X connect 9 0 7 0;
#X connect 10 0 9 0;
#X connect 11 0 7 1;
#X connect 12 0 6 0;
#X connect 13 0 12 0;
#X connect 13 1 14 0;
#X connect 14 0 5 1;
#X connect 15 0 0 1;
#X connect 15 0 2 1;
#X connect 16 0 15 0;
#X connect 17 0 1 1;
#X connect 18 0 17 0;
#X connect 18 1 17 1;
#X connect 19 0 10 0;
#X connect 19 1 11 0;
#X connect 20 0 19 0;
#X connect 21 0 18 0;
#X connect 21 0 20 0;
#X connect 22 0 16 0;
#X connect 22 0 20 0;
#X connect 23 0 4 1;
#X connect 24 0 20 0;
#X connect 25 0 20 0;
#X connect 26 0 22 0;
#X connect 27 0 21 0;
#X connect 28 0 18 0;
#X connect 29 0 16 0;
#X restore 386 124 pd calculateGraph;
#N canvas 0 50 450 278 (subpatch) 0;
#X array \$0-curve 100 float 0;
#X coords 0 1 99 0 100 70 2 0 0;
#X restore 106 140 graph;
#X floatatom 214 160 5 -100 0 3 Thresh comp/t #0-thresh, f 5;
#X floatatom 259 160 5 1 100 3 Ratio comp/r #0-ratio, f 5;
#X floatatom 259 191 5 0 250 3 Resp comp/re #0-response, f 5;
#X floatatom 214 191 5 0 500 3 Look comp/l #0-lookahead, f 5;
#X obj 239 109 hradio 15 1 0 2 \$0-rmspeak empty RMS/Peak 0 24 0 10
-262144 -1 -1 0;
#X floatatom 298 190 5 -80 20 3 Gain comp/g #0-gain, f 5;
#X text 28 18 PD Lookahead Compressor, f 13;
#N canvas 0 50 797 467 compressor1Core 0;
#X obj 147 400 outlet~;
#X obj 147 306 *~;
#X obj 147 373 *~;
#X obj 237 74 dbtorms;
#X obj 332 74 /;
#X obj 332 52 swap 1;
#X obj 544 189 /;
#X obj 544 167 swap 1000;
#X obj 239 248 lop~;
#X obj 239 193 clip~ 0 1;
#X obj 498 357 line~;
#X obj 498 336 pack f 5;
#N canvas 0 50 421 345 rms 0;
#X obj 70 64 env~ 512;
#X obj 46 144 -~;
#X obj 46 166 *~;
#X obj 46 190 +~;
#X obj 59 228 /~;
#X obj 101 162 +~ 0;
#X obj 70 34 inlet~;
#X obj 59 250 outlet~;
#X obj 318 32 inlet;
#X obj 318 75 switch~;
#X obj 70 92 dbtorms~;
#X text 21 33 Input;
#X text 44 93 RMS;
#X obj 192 37 inlet;
#X obj 251 37 inlet;
#X text 170 17 Thresold;
#X text 247 16 Ratio;
#X text 316 12 On Off;
#X obj 318 54 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X connect 0 0 10 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 0 0;
#X connect 8 0 18 0;
#X connect 10 0 1 0;
#X connect 10 0 5 0;
#X connect 13 0 1 1;
#X connect 13 0 3 1;
#X connect 14 0 2 1;
#X connect 18 0 9 0;
#X restore 224 147 pd rms;
#N canvas 591 50 402 283 peak 0;
#X obj 98 71 abs~;
#X obj 70 115 -~;
#X obj 70 137 *~;
#X obj 70 159 +~;
#X obj 90 199 /~;
#X obj 137 135 +~ 0;
#X obj 98 43 inlet~;
#X obj 90 221 outlet~;
#X obj 305 39 inlet;
#X obj 305 80 switch~;
#X text 47 42 Input;
#X text 62 72 Peak;
#X obj 180 42 inlet;
#X obj 239 42 inlet;
#X text 158 22 Thresold;
#X text 235 21 Ratio;
#X text 304 17 On Off;
#X obj 305 61 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X connect 0 0 1 0;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 0 0;
#X connect 8 0 17 0;
#X connect 12 0 1 1;
#X connect 12 0 3 1;
#X connect 13 0 2 1;
#X connect 17 0 9 0;
#X restore 309 147 pd peak;
#X obj 399 103 == 0;
#X obj 35 57 inlet~;
#X obj 237 53 + 100;
#X obj 498 291 + 100;
#X obj 498 314 dbtorms;
#X text 319 194 Clip signal;
#X text 277 248 Attack/release using LPF;
#X text 51 306 Gain Control;
#X text 369 143 Gain computation;
#X text 569 331 Make-up gain;
#X text 580 187 convert ms to frequency;
#X text 485 237 convert dBFS scale to Pd dB scale, f 18;
#X text 478 76 RMS/Peak selector, f 8;
#X obj 237 32 r \$0-thresh;
#X text 124 31 Convert dB FS to Pd db sclae and then linear amplitude
, f 15;
#X obj 332 31 r \$0-ratio;
#X obj 425 54 r \$0-rmspeak;
#X obj 544 143 r \$0-response;
#X obj 498 269 r \$0-gain;
#X floatatom 448 340 5 0 0 0 - - -, f 5;
#X text 330 10 1/ratio, f 8;
#X obj 605 20 inlet;
#X obj 605 61 switch~;
#X obj 605 42 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 237 100 5 0 0 0 - - -, f 5;
#X floatatom 332 96 5 0 0 0 - - -, f 5;
#X obj 425 78 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 437 103 == 1;
#X obj 63 217 r \$0-lookahead;
#X text 62 196 Lookahead in ms;
#X obj 63 258 delread~ \$0-comp 0;
#X obj 35 167 delwrite~ \$0-comp 500;
#X floatatom 63 239 5 0 0 0 - - -, f 5;
#X floatatom 544 210 5 0 0 0 - - -, f 5;
#X obj 50 110 env~;
#X floatatom 51 132 5 0 0 0 - - -, f 5;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 38 0;
#X connect 4 0 39 0;
#X connect 5 0 4 0;
#X connect 5 1 4 1;
#X connect 6 0 47 0;
#X connect 7 0 6 0;
#X connect 7 1 6 1;
#X connect 8 0 1 1;
#X connect 9 0 8 0;
#X connect 10 0 2 1;
#X connect 11 0 10 0;
#X connect 12 0 9 0;
#X connect 13 0 9 0;
#X connect 14 0 12 3;
#X connect 15 0 12 0;
#X connect 15 0 13 0;
#X connect 15 0 45 0;
#X connect 16 0 3 0;
#X connect 17 0 18 0;
#X connect 18 0 11 0;
#X connect 18 0 33 0;
#X connect 27 0 16 0;
#X connect 29 0 5 0;
#X connect 30 0 40 0;
#X connect 31 0 7 0;
#X connect 32 0 17 0;
#X connect 35 0 37 0;
#X connect 37 0 36 0;
#X connect 38 0 12 1;
#X connect 38 0 13 1;
#X connect 39 0 13 2;
#X connect 39 0 12 2;
#X connect 40 0 14 0;
#X connect 40 0 41 0;
#X connect 41 0 13 3;
#X connect 42 0 46 0;
#X connect 44 0 1 0;
#X connect 46 0 44 0;
#X connect 47 0 8 1;
#X connect 48 0 49 0;
#X restore 201 369 pd compressor1Core;
#X obj 107 296 inlet~;
#X obj 147 432 outlet~;
#X obj 310 106 tgl 20 1 empty comp/state 10 -22 11 0 16 -262144 -1
-1 0 1;
#X msg 200 70 0;
#X obj 153 17 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 147 407 sw2;
#X obj 266 44 route threshold ratio response gain rmspeak lookahead
;
#X obj 262 64 s comp/t;
#X msg 266 15 threshold -2 \, ratio 2 \, response 40 \, gain 0 \, rmspeak
0 \, lookahead 0;
#X obj 318 63 s comp/r;
#X obj 374 63 s comp/re;
#X obj 438 63 s comp/g;
#X obj 531 64 s comp/l;
#X connect 0 0 19 0;
#X connect 0 0 14 0;
#X connect 10 0 16 1;
#X connect 11 0 10 0;
#X connect 11 0 16 0;
#X connect 13 0 10 1;
#X connect 13 0 16 2;
#X connect 14 0 13 0;
#X connect 15 0 19 0;
#X connect 16 0 12 0;
#X connect 17 0 18 0;
#X connect 17 1 20 0;
#X connect 17 2 21 0;
#X connect 17 3 22 0;
#X connect 17 4 7 0;
#X connect 17 5 23 0;
#X connect 19 0 17 0;
#X coords 0 -1 1 1 240 125 1 100 100;
